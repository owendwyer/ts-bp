var opdFirebase=function(){var e="https://www.gstatic.com/firebasejs/7.17.1/firebase-app.js",n=!1,t=[];t.STORE="https://www.gstatic.com/firebasejs/7.17.1/firebase-firestore.js",t.STORAGE="https://www.gstatic.com/firebasejs/7.17.1/firebase-storage.js",t.AUTH="https://www.gstatic.com/firebasejs/7.17.1/firebase-auth.js",t.ANALYTICS="https://www.gstatic.com/firebasejs/7.17.1/firebase-analytics.js";var l=[];function o(o,i){!function(t){n?t(null):a(e,"app",(function(e,l){e?(console.log("error loading",l),t(e)):(n=!0,t(null))}))}((function(e){e?i(e):function(e,n){var o=0,i=0,s=[];for(o=0;o<e.length;o++)void 0!==t[e[o]]&&-1===l.indexOf(e[o])&&s.push(e[o]);var c=function(){(i+=1)===s.length&&n(null)};0===s.length&&n(null);for(o=0;o<s.length;o++)a(t[s[o]],s[o],(function(e,t){e?n(e):(l.push(t),c())}))}(o,i)}))}function a(e,n,t){var l=document.createElement("script");l.type="text/javascript",l.src=e,document.head.appendChild(l),l.onload=function(){l.onload=null,l.onerror=null,t(null,n)},l.onerror=function(){l.onload=null,l.onerror=null,t("error",n)}}var i={apiKey:"AIzaSyAeos5MJfnT8CWGWX10tSS9_NyYkgLFLbc",authDomain:"gamestolearnenglish-fb.firebaseapp.com",databaseURL:"https://gamestolearnenglish-fb.firebaseio.com",projectId:"gamestolearnenglish-fb",storageBucket:"gamestolearnenglish-fb.appspot.com",messagingSenderId:"940750443735",appId:"1:940750443735:web:5e4621b9f37842ac974c92",measurementId:"G-17E5QKFXFM"},s=!1,c=null,r=null;var u=0,f=0,d=[];function p(){for(var e=0;e<d.length;e++)d[e].cancel(),d[e]=null;d=[]}return{loadFirebase:function(e,n){o(e,(function(e){e?n(1):firebase?(!function(){s||(0===firebase.apps.length&&firebase.initializeApp(i),s=!0);null===c&&-1!==l.indexOf("STORE")&&(c=firebase.firestore());null===r&&-1!==l.indexOf("STORAGE")&&(r=firebase.storage().ref())}(),n(null)):n(1)}))},getTaskDetails:function(e,n,t){c?c.collection("monit").doc(e).collection(n).doc("meta").get().then((function(e){e.exists?t(null,e.data()):t(11,null)})).catch((function(){t(12,null)})):t(1,null)},createEntry:function(e,n,t,l){null!==c?c.collection("monit").doc(e).collection(n).add({user:t,started:firebase.firestore.FieldValue.serverTimestamp()}).then((function(){l(null)})).catch((function(){l(13)})):l(1)},sendScore:function(e,n){null!==c?c.collection("monit").doc(e.userMail).collection(e.taskTitle).add({user:e.username,score:e.score,completed:firebase.firestore.FieldValue.serverTimestamp(),salt:e.salt}).then((function(){n(null)})).catch((function(){n(14)})):n(1)},login:function(e){try{var n=new firebase.auth.GoogleAuthProvider;firebase.auth().signInWithPopup(n).then((function(n){var t={displayName:n.user.displayName,email:n.user.email};e(null,t)}))}catch(n){e(1,null)}},loadUserSets:function(e,n){c.collection("users").doc(e).get().then((function(e){n(null,e.data())})).catch((function(e){n(22,null)}))},updateUserSets:function(e,n,t,l){c.collection("users").doc(e).set({sets:n,dates:t}).then((function(){l(null)})).catch((function(e){l(23)}))},getIncrement:function(e){var n=firebase.firestore.FieldValue.increment(1),t=c.collection("autoId").doc("counter");t.get().then((function(l){t.update({id:n}),e(null,l.data().id)})).catch((function(n){e(24,null)}))},batchUpload:function(e,n,t,l){if(p(),null===r||null===c)l(1);else{u=0,f=n.myFiles.length,d=[];for(var o=function(){u+=1,t(),u===f&&(n={},l(null))},a=function(){p(),l(25)},i=0;i<f;i++){var s=e+n.myPaths[i],h=r.child(s);n.myTypes[i]?d[i]=h.put(n.myFiles[i],n.myTypes[i]):d[i]=h.put(n.myFiles[i]),d[i].on("state_changed",null,a,o)}}},getUploadProgress:function(){return[u,f]}}}();